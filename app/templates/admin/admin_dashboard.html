{% extends "base.html" %}
{% import "bootstrap_wtf.html" as wtf %}

{% block content %}
<h1>{{ _('Admin Dashboard') }}</h1>
<p>{{ _('Pending posts for approval.') }}</p>

{% if posts.items %}
<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>{{ _('Title') }}</th>
            <th>{{ _('Author') }}</th>
            <th>{{ _('Timestamp') }}</th>
            <th>{{ _('Actions') }}</th>
        </tr>
    </thead>
    <tbody>
        {% for post in posts.items %}
        <tr>
            <td>
                <a href="{{ url_for('admin.admin_post_detail', post_id=post.id) }}">
                    {{ post.title }}
                </a>
            </td>
            <td>{{ post.author.username }}</td>
            <td>{{ post.timestamp }}</td>
            <td class="d-flex gap-2">
                <form action="{{ url_for('admin.approve_post', post_id=post.id) }}" method="post">
                    {{ form.hidden_tag() }}
                    <button type="submit" class="btn btn-success btn-sm">{{ _('Approve') }}</button>
                </form>
                <form action="{{ url_for('admin.delete_post', post_id=post.id) }}" method="post">
                    {{ form.hidden_tag() }}
                    <button type="submit" class="btn btn-danger btn-sm">{{ _('Delete') }}</button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<nav aria-label="Post navigation">
    <ul class="pagination">
        <li class="page-item{% if not prev_url %} disabled{% endif %}">
            <a href="{{ prev_url }}" class="page-link">
                <span aria-hidden="true">&larr;</span> {{ _('Newer posts') }}
            </a>
        </li>
        <li class="page-item{% if not next_url %} disabled{% endif %}">
            <a href="{{ next_url }}" class="page-link">
                {{ _('Older posts') }} <span aria-hidden="true">&rarr;</span>
            </a>
        </li>
    </ul>
</nav>
{% else %}
<p>{{ _('No pending posts.') }}</p>
{% endif %}
{% endblock %}